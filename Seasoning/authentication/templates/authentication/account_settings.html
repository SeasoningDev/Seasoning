{% extends "base.html" %}

{% block title %}{% if viewing_other %}Publiek Profiel{% else %}Mijn Profiel{% endif %}{% endblock %}

{% block myaccount-active %}{% if not viewing_other %}active{% endif %}{% endblock %}

{% block extra_script %}
<script src="{{ STATIC_URL }}js/ajax_content_loader.js"></script>
<script>
$(document).ready(function() {
	$("#recipe-summaries-wrapper").ajax_load({
		ajax_url: '{% url "ajax_account_recipes_list" viewed_user.id %}',
		form: $("#account-recipes-form"),
		page_field_to_update: $("#account-recipes-form #page"),
		loader_element: $("#recipes-ajax-loader"),
		no_more_data_element_to_show: $("#recipes-ajax-done"),
	});
});
</script>
{% endblock %}

{% block content %}

<div id="account-settings-container"{% if viewing_other %} class="public-profile"{% endif %}>
    <div id="account-settings">
        {% block account_settings %}
        <div id="account-image">
            <img src="{{ MEDIA_URL }}{{ viewed_user.avatar }}" alt="De avatar van {{ viewed_user.get_full_name }}">
        </div>
        
        <div id="account-info">
            <div id="account-name">{{ viewed_user.get_full_name }}</div>
            <div id="account-rank">
                <strong>Rang</strong>
                <br />
                {{ viewed_user.rank }}{% if not viewing_other %} ({{ viewed_user.recipes_until_next_rank }} recept(en) tot volgende rang){% endif %}
            </div>
	        
            
        </div>
    </div>
        
    
    <div id="account-recipes">
    	<a id="recipes-top"></a>
        <h3 class="title">Toegevoegde recepten</h3> 
        <form id="account-recipes-form" target="" method="post">
			{% csrf_token %}
        	<input id="page" name="page" type="hidden" value="0" autocomplete="off" />
			<input type="submit" style="display: none;" />
        </form>
        <div id="recipe-summaries-wrapper" class="summaries-wrapper">
        </div>
		
		<div id="recipes-ajax-loader" style="clear: both; text-align: center; padding-top: 20px; margin-bottom: 20px;">
			<div>
				{% include "includes/ajax-loader.html" %}
			</div>
			Meer recepten worden geladen...
		</div>
		
		<div id="recipes-ajax-done" style="clear: both; text-align: center; padding-top: 20px; display: none; margin-bottom: 20px;">
			<a href="#top-of-page">Terug naar boven</a>
		</div>
        {% endblock %}
    </div>
    
    {% if not viewing_other %}
    <div id="account-settings-links">
    	<ul>
    		<li class="{% block public_profile_active %}active{% endblock %}"><a href="{% url 'authentication.views.account_settings' %}">Publiek Profiel</a></li>
            <li class="{% block profile_settings_active %}{% endblock %}"><a href="{% url 'authentication.views.account_settings_profile' %}">Profielinstellingen</a></li>
            <li class="{% block social_settings_active %}{% endblock %}"><a href="{% url 'authentication.views.account_settings_social' %}">Sociale Netwerken</a></li>
    		<li class="{% block privacy_settings_active %}{% endblock %}"><a href="{% url 'authentication.views.account_settings_privacy' %}">Privacyinstellingen</a></li>
    	</ul>
    </div>
    {% endif %}
    
    <br class="clear" />
</div>
{% endblock %}
