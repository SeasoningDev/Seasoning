{% extends "base.html" %}

{% block title %}Recepten{% endblock %}

{% block extra_script %}
<script src="{{ STATIC_URL }}js/forms.js"></script>
<script src="{{ STATIC_URL }}js/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}js/browse_recipes.js"></script>
<script src="{{ STATIC_URL }}js/ajax_content_loader.js"></script>
<script>
$(function() {
	$("#browse-recipe-summaries-wrapper").ajax_load({
		ajax_url: '/recipes/',
		form: $("#{{ search_form_id }}"),
		page_field_to_update: $("#id_page"),
		loader_element: $("#recipes-ajax-loader"),
		no_more_data_element_to_show: $("#recipes-ajax-done"),
	});
	$("#id_search_string").focus();
});
</script>
{% endblock %}

{% block recipes-active %}active{% endblock %}

{% block content %}
<h2>Recepten zoeken</h2>

<div id="recipe-search-container">
	<form id="{{ search_form_id }}" class="keywords" action="" method="post">
	    {% csrf_token %}
	    
	    {{ search_form.page }}
	    
	    <div id="basic-search">
	        {{ search_form.search_string }}
		    <button id="keywords-submit" class="nochrome" type="submit">
		        <span class="submit-icon"> </span>
		    </button>
	
			<span id="browse-recipes-loader">
				{% include "includes/ajax-loader.html" %}
			</span>
		</div>
		<a id="advanced-link" href="#">
		    Geavanceerd zoeken
		</a>
	    {{ search_form.advanced_search.as_hidden }}
	    <a href="{% url 'add_recipe' %}" title="Voeg een nieuw recept toe" 
	       id="add-recipe-button" class="add-button"><span id="add-recipe-button-text">Voeg een nieuw recept toe</span></a>
	    <hr id="search-form-divider">
	    <div id="advanced-search">
	        <div id="sorting-options">
	            <p>
	                Sorteren op:
	            </p>
	        	{{ search_form.sort_field }}
	            <a class="order-arrow up{% if search_form.sort_order.0.is_checked %} active{% endif %}" href="#">
	                <img src="{{ STATIC_URL }}img/icons/up.png" title="Sorteer in oplopende volgorde" alt="Sorteer in oplopende volgorde" />
	            </a><a class="order-arrow down{% if search_form.sort_order.1.is_checked %} active{% endif %}" href="#">
	                <img src="{{ STATIC_URL }}img/icons/down.png" title="Sorteer in aflopende volgorde" alt="Sorteer in aflopende volgorde" />
	            </a>
	            {{ search_form.sort_order }}
	        </div>
	        <div id="inseason-option">
	        	<p>
	        		In seizoen: {{ search_form.inseason }}
	        	</p>
	        </div>
	    	<div id="veg-options">
	    	    <p>
	                Voedingswijze:
	            </p>
	            <a class="veg-choice active" href="#">
	            	<img src="{{ STATIC_URL }}img/icons/vegan.png" title="Veganistische gerechten" alt="Veganistische gerechten" />
	            	{{ search_form.ven }}
	            </a><a class="veg-choice active" href="#">
	                <img src="{{ STATIC_URL }}img/icons/vegetarian.png" title="Vegetarische gerechten" alt="Vegetarische gerechten" />
	                {{ search_form.veg }}
	            </a><a class="veg-choice active" href="#">
	            	<img src="{{ STATIC_URL }}img/icons/non-vegetarian.png" title="Niet-vegetarische gerechten" alt="Niet-vegetarische gerechten" />
	            	{{ search_form.nveg }}
	            </a>
	        </div>
	        <div id="incl-ings">
	            <p>
	                Dit wil ik erbij:
	            </p>
	            {{ include_ingredients_formset.management_form }}
	            <a href="#"><span class="option and first{% if search_form.include_ingredients_operator.0.is_checked %} active{% endif %}">Allemaal</span></a><a href="#"><span class="option or last{% if search_form.include_ingredients_operator.1.is_checked %} active{% endif %}">Minstens 1</span></a>
	            {{ search_form.include_ingredients_operator }}
	            
	            <input id="include-ingredients-input" class="ingredients-input" type="text" placeholder="Voer ingrediënten in" />
	
	            <div id="included-ingredients">
	            </div>
	            <span class="empty-form">
	                {{ include_ingredients_formset.empty_form.name }}
	            </span>
	        </div>
	        <div id="excl-ings">
	            <p>
	                Dit wil ik er niet bij:
	            </p>
	            {{ exclude_ingredients_formset.management_form }}
	            <input id="exclude-ingredients-input" class="ingredients-input" type="text" placeholder="Voer ingrediënten in" />
	
	            <div id="excluded-ingredients">
	            </div>
	            <span class="empty-form">
	                {{ exclude_ingredients_formset.empty_form.name }}
	            </span>
	        </div>
	        <div id="extra-info">
	            <p>
	                Type maaltijd:
	            </p>
	    	   {{ search_form.course }}
	            <p>
	                Keuken:
	            </p>
	            {{ search_form.cuisine }}
	    	</div>
			
			
	    	<br class="clear" />
	    </div>
	    
	    <div id="browse-recipe-summaries-wrapper" class="summaries-wrapper">
		</div>
		
		<div id="recipes-ajax-loader" style="clear: both; text-align: center; padding-top: 20px;">
			<div>
				{% include "includes/ajax-loader.html" %}
			</div>
			Meer recepten worden geladen...
		</div>
		
		<div id="recipes-ajax-done" style="clear: both; text-align: center; padding-top: 20px; display: none;">
			<a href="#top-of-page">Terug naar boven</a>
		</div>
	</form>
	
	<br class="clear" />
</div>

{% endblock %}
